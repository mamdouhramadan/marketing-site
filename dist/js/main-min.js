async function registerSW(){if("localhost"!==location.hostname&&"127.0.0.1"!==location.hostname)"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js",{scope:"."}).then(function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)},function(e){console.log("ServiceWorker registration failed: ",e)});else if("serviceWorker"in navigator)for(var e=await navigator.serviceWorker.getRegistrations(),t=0;t<e.length;t++)await e[t].unregister()}document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".scroll-top");if(e){function t(){var t=document.documentElement.scrollTop||document.body.scrollTop;e.style.display=t>20?"flex":"none"}e.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}),window.addEventListener("scroll",t),t()}}),window.addEventListener("load",function(){registerSW()}),function(){function e(){var e=document.documentElement,t=document.getElementById("theme-toggle"),n=document.getElementById("mobile-menu-toggle"),a=document.getElementById("mobile-menu");"dark"===localStorage.getItem("theme")||!localStorage.getItem("theme")&&window.matchMedia("(prefers-color-scheme: dark)").matches?e.classList.add("dark"):e.classList.remove("dark"),t&&t.addEventListener("click",function(){e.classList.toggle("dark"),localStorage.setItem("theme",e.classList.contains("dark")?"dark":"light")}),n&&a&&n.addEventListener("click",function(){var e=a.classList.contains("hidden");a.classList.toggle("hidden",!e),n.setAttribute("aria-expanded",e?"true":"false"),n.setAttribute("aria-label",e?n.getAttribute("data-close-label")||"Close menu":n.getAttribute("data-open-label")||"Open menu");var t=n.querySelector(".mobile-menu-icon-open"),o=n.querySelector(".mobile-menu-icon-close");t&&t.classList.toggle("hidden",e),o&&o.classList.toggle("hidden",!e)})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}(),function(){function e(){try{if(localStorage.getItem("cookie_consent"))return}catch(e){return}var e=document.getElementById("cookie-banner");if(e){e.classList.remove("hidden"),e.style.display="flex";var t=document.getElementById("cookie-accept"),n=document.getElementById("cookie-decline");t&&t.addEventListener("click",function(){a(!0)}),n&&n.addEventListener("click",function(){a(!1)})}function a(t){try{localStorage.setItem("cookie_consent",t?"accepted":"declined")}catch(e){}e.style.opacity="0",e.style.transform="translateY(1rem)",setTimeout(function(){e.style.display="none",e.classList.add("hidden")},300)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}(),function(){function e(){document.body.addEventListener("click",function(e){var t=e.target.closest(".accordion-btn");if(t){var n=t.closest(".accordion-item"),a=n?n.querySelector(".accordion-panel"):null,o=t.querySelector(".accordion-icon-plus"),r=t.querySelector(".accordion-icon-close");if(n&&a){var i=t.closest("[id]"),d="true"===t.getAttribute("aria-expanded");i&&i.querySelectorAll(".accordion-item").forEach(function(e){if(e!==n){var t=e.querySelector(".accordion-btn"),a=e.querySelector(".accordion-panel");t&&t.setAttribute("aria-expanded","false"),a&&(a.classList.add("max-h-0","opacity-0"),a.classList.remove("max-h-96","opacity-100"));var o=e.querySelector(".accordion-icon-plus"),r=e.querySelector(".accordion-icon-close");o&&o.classList.remove("hidden"),r&&r.classList.add("hidden")}}),d?(t.setAttribute("aria-expanded","false"),a.classList.add("max-h-0","opacity-0"),a.classList.remove("max-h-96","opacity-100"),o&&o.classList.remove("hidden"),r&&r.classList.add("hidden")):(t.setAttribute("aria-expanded","true"),a.classList.remove("max-h-0","opacity-0"),a.classList.add("max-h-96","opacity-100"),o&&o.classList.add("hidden"),r&&r.classList.remove("hidden"))}}})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}(),function(){function e(e){var t=document.createElement("div");return t.textContent=null==e?"":e,t.innerHTML}function t(){var t=document.getElementById("blog-list");if(t){var n=window.__BLOGS__||[],a=6,o=1,r=document.getElementById("blog-prev"),i=document.getElementById("blog-next"),d=document.getElementById("blog-pages"),c=document.getElementById("blog-search"),l=document.getElementById("blog-category"),s=document.getElementById("blog-sort"),m=window.__BLOG_DETAIL_BASE__||"blog-detail.html";c&&c.addEventListener("input",function(){o=1,g()}),l&&l.addEventListener("change",function(){o=1,g()}),s&&s.addEventListener("change",function(){o=1,g()}),r&&r.addEventListener("click",function(){o>1&&(o--,g())}),i&&i.addEventListener("click",function(){var e=u(),t=Math.ceil(e.length/a);o<t&&(o++,g())}),g()}function u(){var e=c&&c.value?c.value.toLowerCase().trim():"",t=l&&l.value?l.value:"",a=s&&s.value?s.value:"date-desc",o=n.filter(function(n){var a=!e||n.title.toLowerCase().indexOf(e)>=0||n.excerpt&&n.excerpt.toLowerCase().indexOf(e)>=0,o=!t||n.category===t;return a&&o});return"date-desc"===a?o.sort(function(e,t){return t.date<e.date?-1:1}):"date-asc"===a?o.sort(function(e,t){return e.date<t.date?-1:1}):"title-asc"===a?o.sort(function(e,t){return e.title.localeCompare(t.title)}):"title-desc"===a&&o.sort(function(e,t){return t.title.localeCompare(e.title)}),o}function g(){var n=u();o=Math.min(o,Math.max(1,Math.ceil(n.length/a))||1),function(n){var r=(o-1)*a,i=n.slice(r,r+a);t.innerHTML=i.map(function(t){return'<article class="blog-card bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden transition shadow-sm hover:shadow-md"><a href="'+m+"?id="+t.id+'" class="block"><img class="w-full aspect-[16/10] object-cover" src="'+(t.image||"")+'" alt="'+e(t.title||"")+'" loading="lazy"><div class="p-5"><p class="text-sm text-primary font-medium">'+e(t.category||"")+'</p><h2 class="text-lg font-bold text-secondary dark:text-gray-100 mt-1 line-clamp-2">'+e(t.title||"")+'</h2><p class="text-sm text-gray-500 dark:text-gray-400 mt-2">'+e(t.date||"")+" &middot; "+e(t.author||"")+'</p><p class="text-gray-600 dark:text-gray-300 text-sm mt-2 line-clamp-2">'+e(t.excerpt||"")+"</p></div></a></article>"}).join("")}(n),function(e){var t=Math.max(1,Math.ceil(e/a));if(r&&(r.disabled=o<=1),i&&(i.disabled=o>=t),d){for(var n="",c=1;c<=t;c++)n+='<button type="button" class="blog-page-btn px-3 py-1.5 rounded '+(c===o?"bg-primary text-white":"border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700")+'" data-page="'+c+'">'+c+"</button>";d.innerHTML=n,d.querySelectorAll(".blog-page-btn").forEach(function(e){e.addEventListener("click",function(){o=parseInt(e.getAttribute("data-page"),10),g()})})}}(n.length)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()}(),function(){function e(e){var t=document.createElement("div");return t.textContent=null==e?"":e,t.innerHTML}function t(){var t=document.getElementById("blog-content");if(t){var n=window.__BLOGS__||[],a=window.__BLOG_DETAIL_STRINGS__||{},o=window.__BLOG_DETAIL_BASE__||"blog-detail.html",r=window.__BLOG_DETAIL_SITE__||"Trufla",i=new URLSearchParams(window.location.search),d=parseInt(i.get("id"),10),c=n.find(function(e){return e.id===d})||n[0],l=n.indexOf(c),s=n.filter(function(e){return e.category===c.category&&e.id!==c.id}).slice(0,4),m=l>0?n[l-1]:null,u=l>=0&&l<n.length-1?n[l+1]:null,g=document.getElementById("blog-image"),y=document.getElementById("blog-title"),f=document.getElementById("blog-date"),v=document.getElementById("blog-author"),p=document.getElementById("blog-category");if(g){g.innerHTML="";var h=document.createElement("img");h.src=c.image||"",h.alt=c.title||"",h.className="w-full h-full object-cover",g.appendChild(h)}y&&(y.textContent=c.title||""),f&&(f.textContent=c.date||""),v&&(v.textContent=c.author||""),p&&(p.textContent=c.category||""),t.innerHTML=c.content||"<p>"+(a.noContent||"No content.")+"</p>";var x=document.querySelector("title");x&&(x.textContent=(c.title||"Blog")+" | "+r);var b=document.querySelector('[aria-current="page"]');b&&(b.textContent=c.title||"Post");var L=document.getElementById("blog-comments"),E=c.comments||[];L&&(L.innerHTML=E.length?E.map(function(t){return'<div class="flex gap-3"><div class="flex-shrink-0 w-10 h-10 rounded-full bg-primary/20 text-primary flex items-center justify-center"><span class="fa fa-user"></span></div><div><p class="font-medium text-secondary dark:text-gray-100">'+e(t.author||"")+'</p><p class="text-sm text-gray-500 dark:text-gray-400">'+e(t.date||"")+'</p><p class="text-gray-700 dark:text-gray-300 mt-1">'+e(t.text||"")+"</p></div></div>"}).join(""):'<p class="text-gray-500 dark:text-gray-400">'+e(a.noComments||"No comments yet. Be the first to comment.")+"</p>");var k=document.getElementById("comment-form");k&&k.addEventListener("submit",function(e){e.preventDefault(),alert(a.commentSubmitted||"Comment submitted (demo).")});var w=document.getElementById("blog-related");w&&(w.innerHTML=s.length?s.map(function(t){return'<a href="'+o+"?id="+t.id+'" class="block group"><div class="flex gap-3"><img src="'+(t.image||"")+'" alt="'+e(t.title||"")+'" class="w-20 h-14 rounded object-cover flex-shrink-0" loading="lazy"/><div class="min-w-0"><p class="font-medium text-secondary dark:text-gray-100 line-clamp-2 group-hover:text-primary">'+e(t.title||"")+'</p><p class="text-sm text-gray-500 dark:text-gray-400">'+e(t.date||"")+"</p></div></div></a>"}).join(""):'<p class="text-gray-500 dark:text-gray-400">'+e(a.noRelated||"No related posts.")+"</p>");var I=document.getElementById("blog-prev-wrap"),S=document.getElementById("blog-next-wrap");I&&(I.innerHTML=m?'<a href="'+o+"?id="+m.id+'" class="inline-flex items-center gap-2 text-primary font-medium hover:text-secondary dark:hover:text-gray-300/80"><span class="fa fa-arrow-left"></span> '+e(m.title||a.previous||"Previous")+"</a>":""),S&&(S.innerHTML=u?'<a href="'+o+"?id="+u.id+'" class="inline-flex items-center gap-2 text-primary font-medium hover:text-secondary dark:hover:text-gray-300/80">'+e(u.title||a.next||"Next")+' <span class="fa fa-arrow-right"></span></a>':"")}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()}();